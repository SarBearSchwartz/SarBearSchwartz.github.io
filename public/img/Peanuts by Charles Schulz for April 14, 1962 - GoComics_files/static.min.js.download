/*! Onsite Tag, version: "2.0.18" */!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([,function(e,t,o){"use strict";o.r(t);const n={PUBLISHER:"Publisher",NIE:"NIE"};n.NIE;"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),new Uint8Array(16);for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);const l=(e,t)=>{i()&&("error"===e?console.error(e+": "+t):console.log(e+": "+t))},i=()=>s("dbg")&&"smtdn9"===window.xl8_config.dbg,s=e=>{try{return void 0!==window.xl8_config[e]&&null!==window.xl8_config[e]}catch(e){return!1}},c=e=>{let t=!1;return e.forEach(e=>{"object"==typeof e&&(t=!0)}),t},d=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);const u=()=>(l("info","protocol is https:"),"https:"),p=(e,t,o)=>{let n=o?e:encodeURIComponent(e);return n+="="+encodeURIComponent(t)},f=(e,t,o,n)=>{const r=new XMLHttpRequest;return r.withCredentials=!0,r.onreadystatechange=()=>n(r),r.open(t,e),l("info","Fired tag with link: "+e+" and params: "+o+" using "+t+" method"),r},y=(e,t,o)=>{let n="|,";const r={};e.forEach(e=>{if(Object.prototype.hasOwnProperty.call(e,"@type"))"PropertyValue"===e["@type"]&&(Object.prototype.hasOwnProperty.call(r,e.name)||(r[e.name]=[]),r[e.name].push(e.value));else{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n+=t+":"+e[t]+",");n+="|"}});for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(l("info","found attribute "+e+" with value "+r[e].join(",")),t[e]=r[e].join(","));n.length>2&&(l("info","found attribute "+o+" with value "+n),t[o]=n)},w=(e,t,o,n)=>{if((new Date).getTime()-n>2500)l("info","Max time exceeded");else for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let a;a=void 0===o?r.replace(/ /g,"_"):o+"-"+r.replace(/ /g,"_"),"object"==typeof e[r]?Array.isArray(e[r])?c(e[r])?y(e[r],t,a):(l("info","found attribute "+a+" with value "+e[r].join()),t[a]=e[r].join()):w(e[r],t,a,n):(l("info","found attribute "+a+" with value "+e[r]),t[a]=e[r])}},m=(e,t)=>{d()?((e,t,o)=>{f(e+"&"+t,"GET",null,o).send()})(e,t,h):((e,t,o)=>{const n=f(e,"POST",t,o);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const r=t?t+"&xl8postbody=1":"xl8postbody=1";n.send(r)})(e,t,h)},h=e=>{e.readyState===XMLHttpRequest.DONE&&(200!==e.status&&l("error","There was a problem with the request."),200===e.status&&(l("info","Tag fired successfully!"),g(e)))},g=e=>{var t=document.createElement("script");t.text=e.responseText,t.type="text/javascript",t.async=!0,document.body.appendChild(t)},b=(e=[],t=null,o=null)=>{const n={};if(null!=t&&(t.classes.forEach(e=>{let t="";[...document.getElementsByClassName(e)].forEach(e=>{t+=e.textContent}),n[e]=t,l("info","found class "+e+" with value "+t)}),t.ids.forEach(e=>{const t=document.getElementById(e);null!==t&&(n[e]=t.textContent,l("info","found id "+e+" with value "+t.textContent))}),t.elements.forEach(e=>{let t="";[...document.getElementsByTagName(e)].forEach(e=>{t+=e.textContent}),n[e]=t,l("info","found tag "+e+" with value "+t)}),t.complex.forEach(t=>{let o=[];"class"===t.type?o=[...document.getElementsByClassName(t.selector)]:"id"===t.type?o=[document.getElementById(t.selector)]:"element"===t.type&&(o=[...document.getElementsByTagName(t.selector)]),o.forEach(o=>{Object.prototype.hasOwnProperty.call(t,"key")&&t.key.split("|").forEach(r=>{let a=o.getAttribute(r);if(null!==a)if("json"===t.valueType)try{window[r]=JSON.parse(a),e.push(r)}catch(e){console.error(e)}else a=a.replace(/[^a-zA-Z0-9]/g,"_"),Object.prototype.hasOwnProperty.call(t,"value")?n[a]=o.getAttribute(t.value):n[a]=o.textContent,l("info","found tag "+a+" with value "+n[a])})})})),e&&e.length){const t=(new Date).getTime();e.forEach(e=>{w(((e="dataLayer")=>{try{if(void 0===window[e])throw new Error;if("object"!=typeof window[e]){const t={};return t[e]=window[e],t}return window[e]}catch(t){l("error",`${e} is undefined`)}})(e),n,void 0,t)})}m(((e,t,o,n,r)=>{let a=o+"//"+n+"/on-site-tag-load/?p="+e+"&g="+t+"&j=d";return r&&(a+="&dbg=smtdn9"),a})(window.xl8_config.p,window.xl8_config.g,u(),(()=>s("domain")?(l("info","domain is "+window.xl8_config.domain),window.xl8_config.domain):"mydmp.exelator.com")(),i()),(e=>{const t=d();let o="url="+encodeURIComponent(window.location.href);o+="&rurl="+encodeURIComponent(document.referrer),o+="&xl8onsiteVersion="+encodeURIComponent("2.0.18");for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o+="&"+p(n,e[n],t));return o})({...n,...o}))},x=()=>{l("info","starting schema.org flow");const e=JSON.parse((e=>{let t=null;return Array.prototype.forEach.call(e,e=>{"application/ld+json"===e.type&&(t=e)}),t})(document.getElementsByTagName("script")).text),t={};w(e,t,void 0,(new Date).getTime()),b(null,null,t)},v=(e=null)=>{try{if(l("info","starting data delivery flow"),s("p")&&s("g")){const t=(()=>{let e=[];return!0!==window.xl8_config.disableDataLayer&&(e=["dataLayer"]),s("dataObjects")&&(e=[...e,...window.xl8_config.dataObjects]),e})(),o=(()=>{const e={classes:[],ids:[],elements:[],complex:[]};return s("cssObjects")&&Array.isArray(window.xl8_config.cssObjects)&&window.xl8_config.cssObjects.forEach(t=>{"string"==typeof t?t.startsWith(".")?e.classes.push(t.substring(1)):t.startsWith("#")?e.ids.push(t.substring(1)):e.elements.push(t):"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"selector")&&(t.selector.startsWith(".")?e.complex.push({...t,selector:t.selector.substring(1),type:"class"}):t.selector.startsWith("#")?e.complex.push({...t,selector:t.selector.substring(1),type:"id"}):e.complex.push({...t,type:"element"}))}),e})(),n=e;(e=>{e()})(e=>{b(t,o,{...n,...e}),s("enableSchemaOrg")&&window.xl8_config.enableSchemaOrg&&x(),s("interval")&&setInterval(()=>{try{b(t,o,n)}catch(e){l("error","There was a problem with the buildAndFire flow")}},window.xl8_config.interval)})}}catch(e){l("error","There was a problem with the delivery flow")}};const O=(e=null)=>{if(window.xl8_config){0,v({...e,...{}})}else l("error","xl8_config does not exist on window object")};l("info","NIE is disabled"),window.sendToNielsen=(e=null)=>O(e),"complete"!==document.readyState?window.addEventListener?(window.addEventListener("load",O,!1),l("info","added onload listener")):window.attachEvent&&(window.attachEvent("onload",O),l("info","added onload listener")):(O(),l("info","load event already fired, running manually"))}]);